# Weather telegram bot
Данный телеграм-бот предназначен для отображения погоды в ранее выбраной локации.
Для корректной работы бота требуется Python версии не ниже 3.8, а также следующие модули:
- pyTelegramBotAPI==4.10.0
- python-dotenv==1.0.0
- requests==2.28.2
- peewee==3.16.0
- matplotlib==3.7.1

### Получение исходных кодов и запуск бота
Получите исходный код бота любым доступным для вас способом и поместите в подготовленную директорию на сервере.
Бот использует технологию поллинга, поэтому дополнительного конфигурирования сервера не требуется.
В составе бота используются следующие файлы:
+ main.py - основной скрипт запуска
  + handlers - пакет файлов, содержащий файлы с функциями, участвующие в обработке сообщений от пользователя и выдаче информации пользователю.
  + database - пакет файлов, содержащий файлы с функциями для работы с базой данных. В данном проекте использвется база данных sqlite
  + site_API - пакет файлов файл, содержащий файлы с функциями, необходимые для работы c API.
  + .env - файл, содержащий токен подключения бота к серверам Telegram и токен подключения к API openweathermap.org. Этот файл необходимо создать вручную. Обратите внимание на точку в начале имени файла.
  + requirements.txt - список необходимых зависимостей.
    
#### Получение токенов
Для функционирования бота вам необходимо зарегистрировать бота в Telegram, а также зарегистрироваться на сайте https://openweathermap.org/ и получить токен для подключения к его API.
Полученные токены необходимо моместить в файл *.env*:
- BOT_TOKEN = 'токен, полученный от botfather в Telegram'
- API_KEY = 'токен, полученный от rapidapi.com'

#### Запуск
После установки необходимых зависимостей и проведения первичного конфигурирования можно запускать бота.
Запуск осуществляется командой python main.py
После запуска бот станет доступен в Telegram под тем именем, которое вы для него выбрали.

### Взаимодействие с ботом
Бот принимает определенный список команд:
+ /start <br>
Вывод приветствия
+ /help <br>
Вывод списка команд для бота
+ /setloc <br>
Выбор города(локации)
+ /changeloc <br>
Смена города(локации)
+ /current_weather <br>
Вывод текущей погоды, в локации выбраной пользователем ранее.
+ /one_day <br>
Вывод погоды на сутки, с шагом в 3 часа, в локации выбраной пользователем ранее.
+ /five_days <br>
Вывод погоды на 5 дней, с шагом в 3 часа, в виде графика, в локации выбраной пользователем ранее.
+ /history <br>
Вывод последних 10 запросов пользователя и результатов запросов.
  
После ввода команды выбора города(локации) пользователю прелогается ввести название города.
После чего, пользователь может выбрать одну из команд отвечающих за вывод информации о погоде, в выбраном пользователем городе.
Получая информацию в реальном времени от метеостанций по всему миру, ползователю в форме текста, если это текущая погода ил прогноз погоды на сутки, выводится достоверная информация о состоянии погоды.
Так же, у пользователя есть возможность получить информацию о смене погодных условий, таких как темература, влажность, давление и скорость ветра, на 5 дней, с шагоом в 3 часа, в виде графиков.
